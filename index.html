<!DOCTYPE html>
<html>
<head>
  <title>Calculator</title>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title> Calculator </title>
  <link rel="stylesheet" href="style2.css" />
</head>
<body>
    <div class="container">
        <div class="output">
            <div  id="arrayBoxTop"></div>
            <div  id="arrayBoxBottom"></div>
            <div  id="arrayBoxvarOp1"></div>
        </div>
        <div id="frame-display">
            
            <div id="display-area" class="output">
    
            </div>
            
        </div>
        <div id="frame-top">
    
        </div>
        <div id="frame-bottom">
            <div id="calculator">
                <div id="div-operators">
                    <button class="btns-operators" id="add">+</button>
                    <button class="btns-operators" id="subtract">-</button>
                    <button class="btns-operators" id="multiply">x</button>
                    <button class="btns-operators" id="divide">/</button>
                </div>
                <div id="div-numbers">
                    <div class="btns-rows" id="row741">
                        <button class="btns-numbers" id="seven">7</button>
                        <button class="btns-numbers" id="four">4</button>
                        <button class="btns-numbers" id="one" value="1">1</button>
                        <button id="delete">Del</button>
                    </div>
                    <div class="btns-rows" id="row8520">
                        <button class="btns-numbers" id="eight">8</button>
                        <button class="btns-numbers" id="five">5</button>
                        <button class="btns-numbers" id="two">2</button>
                        <button class="btns-numbers" id="zero">0</button>    
                    </div>
                    <div class="btns-rows" id="row963">
                        <button class="btns-numbers" id="nine">9</button>
                        <button class="btns-numbers" id="six">6</button>
                        <button class="btns-numbers" id="three">3</button> 
                        <button class="btns-numbers" id="decimal">.</button>                   
                    </div>
                    <div class="btns-rows">
                        <button class="btns-two" id="equals">=</button>
                        <button class="btns-two" id="clear">C</button>
                    </div>
                </div>
            </div>
            <div id="frame-right">
    
            </div>
        </div>
    </div>

    <div class='container2' id='container'></div>

    <script>



        //const calculator = new Calculator(var1TextElement, var2TextElement)


        class Calculator {
            constructor(var1TextElement, var2TextElement) {
                this.var1 = var1TextElement
                this.var2 = var2TextElement
                this.clear()
            }

            clear() {
                this.var2 = ''
                this.var1 = ''
                this.operation = undefined
            }

            delete() {
                this.var2 = this.var2.toString().slice(0, -1)
                console.log(this.var2)
            }

            

            chooseOperation(operation) {
                if (this.var2 === '') return
                if (this.var1 !== '') {
                    this.compute()
                }
                this.operation = operation
                this.var1 = this.var2
                this.var2 = ''
            }

            compute() {
                function add(){
                    answer = prev + current 
                    return(answer)
                }
                function subtract(){
                    answer = prev - current 
                    return(answer)
                }
                function multiply(){
                    answer = prev * current 
                    return(answer)
                }
                function divide(){
                    answer = prev / current 
                    return(answer)
                }

                let answer;
                const prev = parseFloat(this.var1);
                const current = parseFloat(this.var2);
                if (isNaN(prev) || isNaN(current)){
                    return
                }

                if (this.operation === '+'){
                    answer = add();
                } else if (this.operation === '-'){
                    answer = subtract();
                } else if (this.operation === 'x'){
                    answer = multiply();
                } else if (this.operation === '/'){
                    answer = divide();
                } else {
                    return
                }

                this.var2 = answer
                this.operation = undefined;
                this.var1 = '';
            }

            appendNumber(number) {
                if (number === '.' && this.var2.includes('.')) {
                    return
                }
                this.var2 = this.var2.toString() + number.toString()
            }
            
            updateDisplay() {

                displayArea.textContent = this.var2;
                let screenDisplay = parseFloat(displayArea.textContent);
                
                console.log(`${screenDisplay}`, typeof screenDisplay)
            }
            

            

            getDisplayNumber(number) {
                const stringNumber = number.toString()
                const integerDigits = parseFloat(stringNumber.split('.')[0])
                const decimalDigits = stringNumber.split('.')[1]
                let integerDisplay
                if (isNaN(integerDigits)) {
                integerDisplay = ''
                } else {
                integerDisplay = integerDigits.toLocaleString('en', { maximumFractionDigits: 0 })
                }
                if (decimalDigits != null) {
                return `${integerDisplay}.${decimalDigits}`
                } else {
                return integerDisplay
                }
            }
        

        }

        const frameDisplay = document.getElementById("frame-display");

        let operatorButtons = document.getElementsByClassName("btns-operators"); // +-/* buttons

        let numberButtons = document.getElementsByClassName("btns-numbers");  // numbers buttons

        let btnTwo = document.getElementsByClassName("btns-two"); // = and . button

        let numberButtonsArray = [];
        let btnOthersArray = [];
        let operatorButtonsArray = [];

        const equalsButton = document.getElementById("equals");
        const clearButton = document.getElementById("clear");
        const deleteButton = document.getElementById('delete');

        let var1TextElement = document.getElementById("arrayBoxTop");
        let var2TextElement = document.getElementById("arrayBoxBottom");
        let arrayBoxvarOp1 = document.getElementById("arrayBoxvarOp1");
        let displayArea = document.getElementById("display-area")

        for (let i = 0; i < numberButtons.length; i++){
            numberButtonsArray.push(numberButtons[i]);
            numberButtonsArray[i].addEventListener("mouseover", function () {
                numberButtonsArray[i].style.background = "#c6c0c9";
            })
            numberButtonsArray[i].addEventListener("mouseout", function () {
                numberButtonsArray[i].style.background = "white";
            })
            numberButtonsArray[i].addEventListener("click", function () {
                if (numberButtonsArray[i].textContent === '.'){
                    console.log("decimal pressed")
                    number = numberButtonsArray[i].textContent
                    console.log(number)
                    calculator.appendNumber(number);
                    calculator.updateDisplay()
                } else {
                    number = Number(numberButtonsArray[i].textContent);  
                    calculator.appendNumber(number)
                    calculator.updateDisplay() 
                }
            })
        }

        // sets up the operation buttons buttons
        for (let i = 0; i < operatorButtons.length; i++){
            operatorButtonsArray.push(operatorButtons[i]);
            operatorButtonsArray[i].addEventListener("mouseover", function () {
                operatorButtonsArray[i].style.background = "#c6c0c9";
            })
            operatorButtonsArray[i].addEventListener("mouseout", function () {
                operatorButtonsArray[i].style.background = "white";
            })
            operatorButtonsArray[i].addEventListener("click", function () {
                calculator.chooseOperation(operatorButtonsArray[i].textContent)
                calculator.updateDisplay()
            })
        }

        equalsButton.addEventListener('click', function (e) {
            calculator.compute()
            calculator.updateDisplay()
        })

        clearButton.addEventListener('click', function (e) {
            calculator.clear();
            calculator.updateDisplay();

        })

        deleteButton.addEventListener('click', function (e){
            calculator.delete();
            calculator.updateDisplay();
        })

        const calculator = new Calculator(var1TextElement, var2TextElement)


    </script>
    </body>
    </html>